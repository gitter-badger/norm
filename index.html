<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="NORM : Rootless build manager">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>NORM</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/hmage/norm">View on GitHub</a>

          <h1 id="project_title">NORM</h1>
          <h2 id="project_tagline">Rootless build manager</h2>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
<p>Don't have root? Not a problem — <code>norm</code> will install stuff rootlessly into your home directory.</p>

<p>All you need is a working compiler.</p>

<h2>
<a id="quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h2>

<div class="highlight highlight-bash"><pre>git clone https://github.com/hmage/norm <span class="pl-k">~</span>/norm
<span class="pl-c1">.</span> <span class="pl-k">~</span>/norm/.bashrc
norm install gcc-5.1</pre></div>

<p>After everything is done, you will have gcc 5.1 in <code>~/norm</code> with all it's dependencies, like this:</p>

<p><img src="http://hmage.github.io/norm/images/gcc-5.1.png" alt="Example of gcc-5.1 output"></p>

<p>You can add everything installed by <code>norm</code> into your <code>PATH</code> manually or you can use bashrc helper to do it for you — add this line to your <code>.bashrc</code>:</p>

<div class="highlight highlight-bash"><pre>[[ <span class="pl-k">-e</span> <span class="pl-k">~</span>/norm/.bashrc ]] <span class="pl-k">&amp;&amp;</span> <span class="pl-c1">.</span> <span class="pl-k">~</span>/norm/.bashrc</pre></div>

<h2>
<a id="more-examples" class="anchor" href="#more-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>More examples</h2>

<ul>
<li>
<a href="https://github.com/hmage/norm/blob/master/packages/gcc"><code>norm install gcc</code></a> — downloads, compiles and installs gcc 4.9.2. Great way to try out latest stable compiler.</li>
<li>
<a href="https://github.com/hmage/norm/blob/master/packages/ffmpeg"><code>norm install ffmpeg</code></a> — if you're on Ubuntu or Debian, then your ffmpeg can be either <em>very</em> outdated or not present at all. This will get you the newest ffmpeg with support for x264, x265, webm, opus and AAC.</li>
<li>
<a href="https://github.com/hmage/norm/blob/master/packages/git"><code>norm install git</code></a> — similarly, your system copy of git might not support new features like push to deploy, reference cloning and shallow cloning.</li>
<li>
<a href="https://github.com/hmage/norm/blob/master/packages/dovecot"><code>norm install dovecot</code></a> — you don't need root to spin up your own IMAP server, either. Change the listening port to something higher than 1024, set up virtual accounts and you're good to go.</li>
<li>
<a href="https://github.com/hmage/norm/blob/master/packages/mc"><code>norm install mc</code></a> — latest midnight commander is much nicer than it was a few years ago, don't be stuck in the past.</li>
<li>
<a href="https://github.com/hmage/norm/blob/master/packages/openssh"><code>norm install openssh</code></a> — your system openssh client might not support ECDSA and ed25519, which is increasingly problematic as the world around you moves away from DSA and RSA.</li>
<li>
<a href="https://github.com/hmage/norm/blob/master/packages/fontconfig"><code>norm install fontconfig</code></a> — if font rendering on your machine looks horrible, install this, set up <code>LD_LIBRARY_PATH</code> to <code>~/norm/lib</code> in your <code>.bashrc</code> (before interactive check cutoff) and restart X session.</li>
</ul>

<h2>
<a id="about" class="anchor" href="#about" aria-hidden="true"><span class="octicon octicon-link"></span></a>About</h2>

<p><code>norm</code> installs formulas to your home directory, leaving system-wide programs intact and untouched. By default, install prefix is <code>~/norm.$MACHTYPE.$GLIBC_VERSION</code>, but you can change that. See output of <code>norm --help</code>.</p>

<p>The compiled binaries will not work properly on older version of glibc or in another location, they also might hardcode the user ID or name they were built with, so please treat them as your own personal builds (which they are).</p>

<p>Since <code>norm</code> uses <code>curl</code> to download source code, it supports proxies. Just set up appropriate environment variables if you already haven't done so, like this:</p>

<div class="highlight highlight-bash"><pre><span class="pl-k">export</span> http_proxy=http://192.168.20.99:8080/
<span class="pl-k">export</span> https_proxy=<span class="pl-smi">$http_proxy</span>
<span class="pl-k">export</span> ftp_proxy=<span class="pl-smi">$http_proxy</span></pre></div>

<p>Replace the IP address and port number with appropriate values for your proxy. You can add this to your <code>.bashrc</code> if you haven't done so.</p>

<h2>
<a id="formulas" class="anchor" href="#formulas" aria-hidden="true"><span class="octicon octicon-link"></span></a>Formulas</h2>

<p><code>norm</code> formulas are bash scripts, here's a pretty <a href="https://github.com/hmage/norm/blob/master/packages/tar">minimal example</a>:</p>

<div class="highlight highlight-bash"><pre><span class="pl-c">#!/bin/bash</span>
depends_on libacl libattr

fetch_source http://ftpmirror.gnu.org/tar/tar-1.28.tar.gz cd30a13bbfefb54b17e039be7c43d2592dd3d5d0
do_unpack_compile</pre></div>

<p>To simplify these formulas, <code>norm</code> provides functions that reduce number of lines required to build most software:</p>

<ul>
<li>
<code>depends_on</code> — does the listed formulas.</li>
<li>
<code>fetch_source</code> — downloads the source and verifies SHA1 checksum.</li>
<li>
<code>do_unpack_compile</code> — unpacks the source code, runs <code>configure</code>, <code>make</code> and <code>make install</code>.</li>
</ul>

<p>If software uses autotools to configure itself, no other bash functions are needed to successfully compile. There are <a href="https://github.com/hmage/norm/blob/master/norm_common.functions">other functions</a> in case you need to do more, their names and comments should be self explanatory.</p>

<p>To see a complex example, you can take a look at <a href="https://github.com/hmage/norm/blob/master/packages/gcc">how gcc is built</a> with in-tree compilation of it's dependencies.</p>

<h2>
<a id="adding-new-formulas" class="anchor" href="#adding-new-formulas" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding new formulas</h2>

<p>If you want some formula to be added to <code>norm</code>, you can either let me know by <a href="https://github.com/hmage/norm/blob/master/issues">opening an issue</a> telling me that you'd like to see X or Y added to norm.</p>

<p><a href="mailto:hmage@hmage.net">Patches welcome</a>.</p>

<p>You can also, of course, fork the source, add the package yourself and then <a href="https://github.com/hmage/norm/blob/master/compare">open a pull request here</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">NORM maintained by <a href="https://github.com/hmage">hmage</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-50765688-4");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
